<!DOCTYPE html>
<html>
			<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
	<head>
		<title> Tracciamento Animali Selvatici </title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="/static/assets/css/main.css" />
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"/>
		<noscript><link rel="stylesheet" href="assets/css/main.css" /></noscript>
	</head>
	<body class="landing is-preload">
		<div id="page-wrapper" >

			<!-- Header -->
				<header id="header" class="alt">
					<h1><a href="/"> Tracciamento Uccelli</a></h1>
					<nav id="nav">
						<ul>
							<li>
									<li><a href="informazioni.html">Informazioni</a></li>
									<li>
										<a href="#">Seleziona Traiettorie Migratorie</a>
										<ul>
											<li><a href="/graph3">Traiettorie Migratorie</a></li>
											<li><a href="/generate_corridor_plot">Corridoio Migratorio</a></li>
											<li><a href="/selgraph">Tracciamento Esemplari</a></li>
											<li><a href="/selgraphanimato">Tracciamento Animato</a></li>
											<li><a href="inserisci_dati.html">Modifica Traiettorie</a></li>
										</ul>
									</li>
								</li>
							<li><a href="accedi.html" class="button">Login</a></li>
						</ul>
					</nav>
				</header>

			<!-- Banner -->
				<section id="banner", style="height: 200px;">
					<h2> Tracciamento Esemplari Animato </h2>
						</ul>
				</section>
				<section id="main" class="container">

					<section class="box special" id="#mappa">
					<header class="major">
							<h2><br> Visualizzazione della Traiettoria {{s}} <br />
							</h2>
							<p></p>
						<div class="chart" id="scatter_mapbox", style="height: 500px;">
<div id="googleMap" style="width:100%;height:400px;"></div>
<script src="/static/assets/js/jquery.min.js"></script>
<script src="/static/assets/js/jquery.scrolly.min.js"></script>
<script src="/static/assets/js/jquery.scrollex.min.js"></script>
<script src="/static/assets/js/browser.min.js"></script>
<script src="/static/assets/js/breakpoints.min.js"></script>
<script src="/static/assets/js/util.js"></script>
<script src="/static/assets/js/main.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript" >

google.charts.load('current', {'packages': ['map','corechart', 'line'], 'mapsApiKey': 'AIzaSyBIo_qwcuNigphu771JIVFZCrfKarnbhdU'});
google.charts.setOnLoadCallback(myMap);
const data={{data}};

var form = document.getElementById("mainform")
var input = document.getElementById("jsvar")
form.addEventListener('submit', function(e){
        input.value = {{"your_var"}}
        form.submit()
      	})



function myMap() {

var lat = [];
console.log(Object.keys(data).length);
for (let i = 0; i <  Object.keys(data).length; i++) {
  let gData = new google.maps.LatLng(data[i][0], data[i][1]);
  lat.push(gData);
}

var mapProp= {
  center:new google.maps.LatLng(lat[0]),
  zoom:6,
  showLine: true
};
console.log(lat);
var flightPath = new google.maps.Polyline({
  path: lat,
  strokeColor:"#0000FF",
  strokeOpacity:0.8,
  strokeWeight:2
});
var map = new google.maps.Map(document.getElementById("googleMap"),mapProp);
flightPath.setMap(map)
window.scrollTo( (document.body.scrollWidth - document.documentElement.clientWidth)/2, (document.body.scrollHeight - document.documentElement.clientHeight)*1.5/2 );
var but = document.getElementById("jsvar");

setInterval(sequenza,4000);
function sequenza()
{but.form.submit()
}

}


</script>

<form id="mainform" action="/sequence/{{s}}" method="post">
  <input type="hidden" name="jsvar" id="jsvar" value={{k}} />
  <button type="submit" href="#googleMap" ></button>
</form>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBIo_qwcuNigphu771JIVFZCrfKarnbhdU&callback=myMap"></script>
						</div>
					</section>
				</section>
		</div>
</body>
</html>