<!DOCTYPE html>
<html>
			<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
	<head>
		<title> Tracciamento Esemplari </title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="/static/assets/css/main.css" />
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"/>
		<noscript><link rel="stylesheet" href="assets/css/main.css" /></noscript>
		<link rel="icon"  href="/static/images/gabbiano.jpeg" />
		<style>
			.checkbox-item label {
				margin-left: 5px; /* Spazio tra la checkbox e l'etichetta */
				min-width: 100px; /* Larghezza minima per allineare le etichette */
			}
		</style>
	</head>
<body class="landing is-preload">
		<div id="page-wrapper">

			<!-- Header -->
				    <header id="header" >
						<h1><a href="/">Tracciamento Larus</a></h1>
						<nav id="nav">
							<ul>
								<li><a href="/static/informazioni.html">Informazioni</a></li>
								<li>
						                    <a href="#">Men√π principale</a>
						                    <ul>
						                        <li><a href="/graph3">Traiettorie Migratorie</a></li>
						                        <li><a href="/generate_corridor_plot">Corridoio Migratorio</a></li>
						                        <li><a href="/selgraph">Tracciamento Esemplari</a></li>
						                        <li><a href="/selgraphanimato">Tracciamento Animato</a></li>
						                        <li><a href="/inserisci_dati">Modifica Traiettorie</a></li>
						                    </ul>
						                </li>
								<li><a href="/static/accedi.html" class="button">Login</a></li>
								<li><a href="/logout" class="button">Logout</a></li>
							</ul>
						</nav>
					</header>

			<!-- Banner -->
				<section id="banner">
					<h2> Seleziona traiettorie </h2>
						</ul>
				</section>
			<!-- Main -->
				<section id="main" class="container">

					<section class="box special">
						<header class="major">
							<h2><br> Selezione le traiettorie da visualizzare nel grafico <br />
							</h2>
							<p></p>
						</header>


    <div class="checkbox-container" style="height:200px; overflow-y:auto;">
        <script>
            // Definizione della lista
            const itemList2 = {{l | tojson }};
            const itemList = itemList2.replace("[","").replace("]","").replace(/['"]+/g,"").split(",")

            // Selezione del contenitore
            const container = document.querySelector('.checkbox-container');

            // Generazione delle checkbox
            Object.keys(itemList).forEach(function (item) {

                const checkboxDiv = document.createElement('div');
                checkboxDiv.className = 'checkbox-item';

                // Creazione dell'elemento checkbox
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = `checkbox-${item}`;
                checkbox.name = 'checkboxes';
                checkbox.value = itemList[item];

                // Creazione dell'etichetta per la checkbox
                const label = document.createElement('label');
                label.htmlFor = `checkbox-${item}`;
                label.textContent = itemList[item];

                // Aggiunta della checkbox e dell'etichetta al div
                checkboxDiv.appendChild(checkbox);
                checkboxDiv.appendChild(label);

                // Aggiunta del div al contenitore
                container.appendChild(checkboxDiv);
            });

        function redirectToLink() {
            // Ottieni tutte le checkbox selezionate
            const checkboxes = document.querySelectorAll('input[name="checkboxes"]:checked');
            let selectedValues = [];
            console.log(checkboxes)
            // Raccogli i valori delle checkbox selezionate
            checkboxes.forEach((checkbox) => {
                selectedValues.push(checkbox.value);
            });
            console.log(selectedValues.value)
            // Costruisci il link di reindirizzamento
            let params = selectedValues.map((value, index) => `${value}`).join(',');
            console.log(params);
            let baseUrl = "/multigraph5/";

            let finalUrl = baseUrl + params;
            console.log(finalUrl);
            // Reindirizza l'utente
            window.location.href = finalUrl;
        }
        </script>
    </div>
    <button onclick="redirectToLink()" class="button" >Vai al grafico</button>
					</section>
				</section>
		</div>
</body>
</html>
